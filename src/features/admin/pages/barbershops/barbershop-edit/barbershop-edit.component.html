<div class="page-container">
  <!-- Header -->
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">Editar Barbería</h1>
      <p class="page-description">Modifica la información de la barbería seleccionada</p>
    </div>
    <div class="header-actions">
      <button 
        type="button" 
        class="btn btn-secondary" 
        (click)="onCancel()"
        [disabled]="loading">
        <i class="fas fa-arrow-left"></i>
        Volver
      </button>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loadingBarbershop" class="loading-container">
    <div class="loading-spinner"></div>
    <p>Cargando información de la barbería...</p>
  </div>

  <!-- Form Container -->
  <div *ngIf="!loadingBarbershop" class="form-container">
    <form [formGroup]="barbershopForm" (ngSubmit)="onSubmit()" class="barbershop-form">
      
      <!-- Form Error Message -->
      <div class="form-error" *ngIf="getFormError()">
        <i class="fas fa-exclamation-triangle"></i>
        {{ getFormError() }}
      </div>
      
      <!-- Información Básica -->
      <div class="form-section">
        <h3 class="section-title">Información Básica</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="name">Nombre de la Barbería *</label>
            <input
              type="text"
              id="name"
              class="form-control"
              [class.error]="f['name'].invalid && f['name'].touched"
              formControlName="name"
              placeholder="Ingresa el nombre de la barbería">
            <div class="error-message" *ngIf="getFieldError('name')">
              {{ getFieldError('name') }}
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label" for="capacity">Capacidad (Sillas) *</label>
            <input
              type="number"
              id="capacity"
              class="form-control"
              [class.error]="f['capacity'].invalid && f['capacity'].touched"
              formControlName="capacity"
              placeholder="Número de sillas"
              min="1"
              max="50">
            <div class="error-message" *ngIf="getFieldError('capacity')">
              {{ getFieldError('capacity') }}
            </div>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group full-width">
            <label class="form-label" for="description">Descripción</label>
            <textarea
              id="description"
              class="form-control"
              formControlName="description"
              placeholder="Describe la barbería, su ambiente, especialidades..."
              rows="3">
            </textarea>
            <div class="error-message" *ngIf="getFieldError('description')">
              {{ getFieldError('description') }}
            </div>
          </div>
        </div>
      </div>

      <!-- Información de Contacto -->
      <div class="form-section">
        <h3 class="section-title">Información de Contacto</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="phone">Teléfono *</label>
            <input
              type="tel"
              id="phone"
              class="form-control"
              [class.error]="f['phone'].invalid && f['phone'].touched"
              formControlName="phone"
              placeholder="+57 300 123 4567">
            <div class="error-message" *ngIf="getFieldError('phone')">
              {{ getFieldError('phone') }}
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label" for="email">Email *</label>
            <input
              type="email"
              id="email"
              class="form-control"
              [class.error]="f['email'].invalid && f['email'].touched"
              formControlName="email"
              placeholder="contacto@barberia.com">
            <div class="error-message" *ngIf="getFieldError('email')">
              {{ getFieldError('email') }}
            </div>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group full-width">
            <label class="form-label" for="website">Sitio Web</label>
            <input
              type="url"
              id="website"
              class="form-control"
              formControlName="website"
              placeholder="https://www.barberia.com">
            <div class="error-message" *ngIf="getFieldError('website')">
              {{ getFieldError('website') }}
            </div>
          </div>
        </div>
      </div>

      <!-- Dirección -->
      <div class="form-section">
        <h3 class="section-title">Dirección</h3>
        
        <div class="form-row">
          <div class="form-group full-width">
            <label class="form-label" for="address">Dirección Completa *</label>
            <input
              type="text"
              id="address"
              class="form-control"
              [class.error]="f['address'].invalid && f['address'].touched"
              formControlName="address"
              placeholder="Calle 123 #45-67, Barrio Centro">
            <div class="error-message" *ngIf="getFieldError('address')">
              {{ getFieldError('address') }}
            </div>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="city">Ciudad *</label>
            <input
              type="text"
              id="city"
              class="form-control"
              [class.error]="f['city'].invalid && f['city'].touched"
              formControlName="city"
              placeholder="Bogotá">
            <div class="error-message" *ngIf="getFieldError('city')">
              {{ getFieldError('city') }}
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label" for="state">Departamento *</label>
            <select
              id="state"
              class="form-control"
              [class.error]="f['state'].invalid && f['state'].touched"
              formControlName="state">
              <option value="" disabled>Selecciona un departamento</option>
              <option *ngFor="let state of states" [value]="state">
                {{ state }}
              </option>
            </select>
            <div class="error-message" *ngIf="getFieldError('state')">
              {{ getFieldError('state') }}
            </div>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="postalCode">Código Postal *</label>
            <input
              type="text"
              id="postalCode"
              class="form-control"
              [class.error]="f['postalCode'].invalid && f['postalCode'].touched"
              formControlName="postalCode"
              placeholder="110111"
              maxlength="6">
            <div class="error-message" *ngIf="getFieldError('postalCode')">
              {{ getFieldError('postalCode') }}
            </div>
          </div>
        </div>
      </div>

      <!-- Horarios de Atención -->
      <div class="form-section">
        <h3 class="section-title">Horarios de Atención</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="openingTime">Hora de Apertura *</label>
            <input
              type="time"
              id="openingTime"
              class="form-control"
              [class.error]="f['openingTime'].invalid && f['openingTime'].touched"
              formControlName="openingTime">
            <div class="error-message" *ngIf="getFieldError('openingTime')">
              {{ getFieldError('openingTime') }}
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label" for="closingTime">Hora de Cierre *</label>
            <input
              type="time"
              id="closingTime"
              class="form-control"
              [class.error]="f['closingTime'].invalid && f['closingTime'].touched"
              formControlName="closingTime">
            <div class="error-message" *ngIf="getFieldError('closingTime')">
              {{ getFieldError('closingTime') }}
            </div>
          </div>
        </div>
      </div>

      <!-- Servicios Disponibles -->
      <div class="form-section">
        <h3 class="section-title">Servicios Disponibles</h3>
        <p class="section-description">Selecciona los servicios que ofrece la barbería</p>
        
        <div class="services-grid">
          <label 
            *ngFor="let service of availableServices" 
            class="service-checkbox">
            <input
              type="checkbox"
              [checked]="isServiceSelected(service)"
              (change)="onServiceChange(service, $event)">
            <span class="checkmark"></span>
            <span class="service-label">{{ service.name }}</span>
          </label>
        </div>
        <div class="error-message" *ngIf="getServicesError()">
          {{ getServicesError() }}
        </div>
      </div>

      <!-- Comodidades -->
      <div class="form-section">
        <h3 class="section-title">Comodidades</h3>
        
        <div class="amenities-grid">
          <label class="amenity-checkbox">
            <input
              type="checkbox"
              formControlName="parkingAvailable">
            <span class="checkmark"></span>
            <span class="amenity-label">
              <i class="fas fa-parking"></i>
              Estacionamiento disponible
            </span>
          </label>
          
          <label class="amenity-checkbox">
            <input
              type="checkbox"
              formControlName="wifiAvailable">
            <span class="checkmark"></span>
            <span class="amenity-label">
              <i class="fas fa-wifi"></i>
              WiFi gratuito
            </span>
          </label>
          
          <label class="amenity-checkbox">
            <input
              type="checkbox"
              formControlName="airConditioning">
            <span class="checkmark"></span>
            <span class="amenity-label">
              <i class="fas fa-snowflake"></i>
              Aire acondicionado
            </span>
          </label>
        </div>
      </div>

      <!-- Imágenes -->
      <div class="form-section">
        <h3 class="section-title">Imágenes</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="logoUrl">Logo (URL)</label>
            <input
              type="url"
              id="logoUrl"
              class="form-control"
              formControlName="logoUrl"
              placeholder="https://ejemplo.com/logo.jpg">
            <div class="error-message" *ngIf="getFieldError('logoUrl')">
              {{ getFieldError('logoUrl') }}
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label" for="coverImageUrl">Imagen de Portada (URL)</label>
            <input
              type="url"
              id="coverImageUrl"
              class="form-control"
              formControlName="coverImageUrl"
              placeholder="https://ejemplo.com/portada.jpg">
            <div class="error-message" *ngIf="getFieldError('coverImageUrl')">
              {{ getFieldError('coverImageUrl') }}
            </div>
          </div>
        </div>
      </div>

      <!-- Estado -->
      <div class="form-section">
        <h3 class="section-title">Estado</h3>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label" for="status">Estado *</label>
            <select
              id="status"
              class="form-control"
              [class.error]="f['status'].invalid && f['status'].touched"
              formControlName="status">
              <option value="active">Activa</option>
              <option value="inactive">Inactiva</option>
              <option value="pending">Pendiente de Aprobación</option>
            </select>
            <div class="error-message" *ngIf="getFieldError('status')">
              {{ getFieldError('status') }}
            </div>
          </div>
        </div>
      </div>

      <!-- Form Actions -->
      <div class="form-actions">
        <button 
          type="button" 
          class="btn btn-secondary" 
          (click)="onCancel()"
          [disabled]="loading">
          Cancelar
        </button>
        
        <button 
          type="submit" 
          class="btn btn-primary"
          [disabled]="barbershopForm.invalid || getServicesError() || loading">
          <span *ngIf="loading" class="loading-spinner"></span>
          <span [class.loading-text]="loading">
            {{ loading ? 'Actualizando...' : 'Actualizar Barbería' }}
          </span>
        </button>
      </div>
      
    </form>
  </div>
</div>